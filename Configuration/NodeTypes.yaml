'Neos.Neos:Node': &DEFAULT
  search:
    elasticSearchMapping:
      _all:
        analyzer: 'dimension_specific'
        search_analyzer: 'dimension_specific'

'Neos.NodeTypes:Text':
  <<: *DEFAULT

'Neos.NodeTypes:Headline':
  <<: *DEFAULT

'Neos.NodeTypes:TextWithImage':
  <<: *DEFAULT

'Neos.Neos:Document':
  properties:
    'uriPathSegment':
      search:
        elasticSearchMapping:
          type: string
          index: not_analyzed
    title:
      search:
        fulltextExtractor: ${Indexing.extractInto('h1', value)}
        elasticSearchMapping: &STRING
          type: string
          include_in_all: true
          analyzer: 'dimension_specific'
          search_analyzer: 'dimension_specific'
    '__fulltext':
      search:
        indexing: ''
        elasticSearchMapping:
          type: object
          properties:
            'h1':
              <<: *STRING
              boost: 20
            'h2':
              <<: *STRING
              boost: 12
            'h3':
              <<: *STRING
              boost: 10
            'h4':
              <<: *STRING
              boost: 5
            'h5':
              <<: *STRING
              boost: 3
            'h6':
              <<: *STRING
              boost: 2
            'text':
              <<: *STRING
              boost: 1

'Ttree.Strapping:Content.Headline':
  properties:
    'title':
      search:
        fulltextExtractor: ${Indexing.extractInto('h1', value)}
        elasticSearchMapping:
          <<: *STRING

'Ttree.Strapping:Content.Text':
  properties:
    'text':
      search:
        fulltextExtractor: '${Indexing.extractHtmlTags(value)}'
        elasticSearchMapping:
          <<: *STRING

'Ttree.Strapping:Mixin.Image':
  abstract: true
  ui:
    inspector:
      groups:
        image:
          label: i18n
          position: 5
          icon: 'icon-image'
  properties:
    alternativeText:
      search:
        elasticSearchMapping:
          <<: *STRING
    imageTitle:
      search:
        elasticSearchMapping:
          <<: *STRING
